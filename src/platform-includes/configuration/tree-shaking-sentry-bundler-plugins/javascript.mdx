### Tree Shaking Optional Code With Sentry Bundler Plugins

_This configuration is available starting with v2.9.0 of the bundler plugins._

If you're using one of our bundler plugins, you can use the `bundleSizeOptimizations` configuration option to tree shake optional code:

```javascript
// For example, the @sentry/webpack-plugin passed to the webpack config
sentryPlugin({
  // other config
  bundleSizeOptimizations: {
    excludeDebugStatements: true,
    excludePerformanceMonitoring: true,
    excludeReplayIframe: true,
    excludeReplayShadowDom: true,
    excludeReplayWorker: true,
  },
});
```

For more details, see the documentation for the specific bundler plugin you're using:

- [Sentry Webpack Plugin](https://www.npmjs.com/package/@sentry/webpack-plugin)
- [Sentry Vite Plugin](https://www.npmjs.com/package/@sentry/vite-plugin)
- [Sentry Esbuild Plugin](https://www.npmjs.com/package/@sentry/esbuild-plugin)
- [Sentry Rollup Plugin](https://www.npmjs.com/package/@sentry/rollup-plugin)

### Tree Shaking Optional Code With Webpack

To tree shake Sentry debug code in your webpack bundles, we recommend using webpack's [DefinePlugin](https://webpack.js.org/plugins/define-plugin/):

```javascript {filename:webpack.config.js}
const webpack = require("webpack");

module.exports = {
  // ... other options
  plugins: [
    new webpack.DefinePlugin({
      __SENTRY_DEBUG__: false,
      __SENTRY_TRACING__: false,
      __RRWEB_EXCLUDE_IFRAME__: true,
      __RRWEB_EXCLUDE_SHADOW_DOM__: true,
      __SENTRY_EXCLUDE_REPLAY_WORKER__: true,
    }),
    // ... other plugins
  ],
};
```

### Tree Shaking Optional Code With Rollup

If you're using `rollup.js`, we recommend using [Rollup's `replace` plugin](https://github.com/rollup/plugins/tree/master/packages/replace):

```javascript {filename:rollup.config.js}
import replace from "@rollup/plugin-replace";
import { terser } from "rollup-plugin-terser";

export default {
  // ... other options
  treeshake: "smallest", // recommended for best tree shaking results
  plugins: [
    replace({
      __SENTRY_DEBUG__: false,
      __SENTRY_TRACING__: false,
      __RRWEB_EXCLUDE_IFRAME__: true,
      __RRWEB_EXCLUDE_SHADOW_DOM__: true,
      __SENTRY_EXCLUDE_REPLAY_WORKER__: true,
    }),
    // ... other plugins (best placed after)
  ],
};
```
