---
title: Hermes
sidebar_order: 30
description: "Learn about using the Hermes engine with our React Native SDK."
redirect_from:
  - /platforms/react-native/hermes/
---

Sentry added support for `react-native` builds that use the `hermes` engine, which required changes to the sentry SDK, `sentry-cli` as well as Sentry itself.

Sentry customers using the SaaS product (sentry.io) will need to update the SDK, and `sentry-cli`.
The minimum required version for the SDK is `@sentry/react-native` [SDK version `1.3.3`](https://github.com/getsentry/sentry-react-native/releases/tag/1.3.3),
and `@sentry/cli` [version `1.51.1`](https://github.com/getsentry/sentry-cli/releases/tag/1.51.1).

For self-hosted Sentry users, the minimum version required is [f07352b](https://hub.docker.com/r/getsentry/sentry/tags?page=1&name=f07352b).

Once you have the minimum version of the SDK, Sentry provides the standard integration as described in the [React Native Sentry documentation](/platforms/react-native/).

<Note>

If you are using Hermes, you should not have the [RAM bundles](/platforms/react-native/manual-setup/ram-bundles/) feature enabled. In Hermes, when loading the bytecode, `mmap` ensures that the entire file is not loaded. Using Hermes with RAM bundles might lead to issues, because those mechanisms are not compatible with each other.

</Note>

## Source Maps

If you do not need custom sourcemaps, the `sentry.gradle` build step fully supports Hermes source maps.

## Custom Source Maps

If you are manually bundling and building React Native apps, follow this three-step process.

### Upload the auto generated `Bundle` and `Sourcemaps` instead of manually compiling them.

`$projectFolder` is the App's project folder.
`$projectName` is your Project's name.

#### Android

`Bundle`: `$projectFolder/android/app/build/generated/assets/react/release/index.android.bundle`
`Sourcemaps`: `$projectFolder/android/app/build/generated/sourcemaps/react/release/index.android.bundle.map`

#### iOS

First you have to edit your `Bundle React Native code and images` build phase in the `$projectFolder/ios/$projectName.xcodeproj/project.pbxproj` file.

Change the `shellScript` line:

_Old_:

```bash
shellScript = "set -e\n\nexport NODE_BINARY=node\n../node_modules/react-native/scripts/react-native-xcode.sh\n";
```

_New_:


```bash
shellScript = "export EXTRA_PACKAGER_ARGS=\"--sourcemap-output $DERIVED_FILE_DIR/main.jsbundle.map\"\nset -e\n\nexport NODE_BINARY=node\n../node_modules/react-native/scripts/react-native-xcode.sh\n";
```

This is going to tell the `bundler` to auto generate the `Sourcemaps` file.

`$user` is your machine's user.
`$projectId` is the Xcode's auto generated Id (e.g. `gmkfjriwzilshxbnndebbqxcwwpn`).
`$device` is the device's target when compiling your app (e.g. `iphonesimulator`).

`Bundle`: `/Users/$user/Library/Developer/Xcode/DerivedData/$projectName-$projectId/Build/Products/Release-$device/main.jsbundle`
`Sourcemaps`: `/Users/$user/Library/Developer/Xcode/DerivedData/$projectName-$projectId/Build/Intermediates.noindex/$projectName.build/Release-$device/$projectName.build/DerivedSources/main.jsbundle.map`

File paths represent a `macOS` file system, they might differ from other operating systems.

If you run `npx react-native run-ios --configuration Release`, the CLI is going to output the following logging:

`info Installing "/Users/$user/Library/Developer/Xcode/DerivedData/$projectName-$projectId/Build/Products/Release-$device/$projectName.app"`

This is the folder you should use to look up the `Bundle` and `Sourcemaps`.

If you decide uploading the auto generated files above, you can skip the `Compile Sourcemaps` step below and go directly to `Upload the Bundle and Source Maps`.

### Compile Sourcemaps

<Note>

Currently, there is an issue when bundling the `hermes` bundle and `source maps` manually.
We recommend not bundling these manually until this is fixed.
Follow the [issue](https://github.com/facebook/react-native/issues/34043) for more details.

</Note>

1. Bundle/minify with `metro` (`react-native`) to get the bundle (`.bundle`) and packager source map (`.packager.map`):

```bash {tabTitle:Android}
npx react-native bundle --platform android --dev false --entry-file index.js --reset-cache --bundle-output index.android.bundle --sourcemap-output index.android.bundle.packager.map --minify false
```

```bash {tabTitle:iOS}
npx react-native bundle --platform ios --dev false --entry-file index.js --reset-cache --bundle-output main.jsbundle --sourcemap-output main.jsbundle.packager.map --minify false
```

2. Compile to bytecode using `hermes` to get the compiler source map (`.hbc.map`):

<Note>

`OS-BIN` is `osx-bin`, `win64-bin`, or `linux64-bin`, depending on which operating system you are using.

</Note>

```bash {tabTitle:Android}
node_modules/hermes-engine/{OS-BIN}/hermesc -O -emit-binary -output-source-map -out=index.android.bundle.hbc index.android.bundle
```

```bash {tabTitle:iOS}
node_modules/hermes-engine/{OS-BIN}/hermesc -O -emit-binary -output-source-map -out=main.jsbundle.hbc main.jsbundle
```

<Note>

If you're using React Native v0.69 or higher, the path of `hermesc` has changed to `node_modules/react-native/sdks/hermesc/{OS-BIN}/hermesc`.

</Note>

3. Merge the two source maps using `compose-source-maps` to get the final source map (`.map`):

```bash {tabTitle:Android}
node node_modules/react-native/scripts/compose-source-maps.js index.android.bundle.packager.map index.android.bundle.hbc.map -o index.android.bundle.map
```

```bash {tabTitle:iOS}
node node_modules/react-native/scripts/compose-source-maps.js main.jsbundle.packager.map main.jsbundle.hbc.map -o main.jsbundle.map
```

### Upload the Bundle and Source Maps

Upload your source maps following [Step 3 on the normal source maps guide](/platforms/react-native/sourcemaps/#3-upload-the-bundle-and-source-maps).

<Note>

You will upload the **original** bundle (`.bundle` or `.jsbundle`, output from Step 1) and the **composed** source map (`.map`, output from Step 3)

</Note>
